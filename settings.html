<!doctype html>
<html lang="id" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SitSense — Pengaturan</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

    <!-- Tailwind + DaisyUI -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icons & helpers -->
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/toastify-js" defer></script>

    <!-- App styles -->
    <link rel="stylesheet" href="./assets/css/styles.css" />
    <link rel="stylesheet" href="./assets/css/theme.css" />

    <style> body { font-family: Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif; } </style>
  </head>

  <body class="min-h-screen text-slate-100">
    <!-- ================= HEADER ================= -->
     
    <div id="header-slot"></div>
<script>
  (async () => {
    const slot = document.getElementById('header-slot');
    slot.innerHTML = await (await fetch('./components/header.html')).text();
    const file = (location.pathname.split('/').pop() || 'index.html').toLowerCase();
    document.querySelectorAll('a[data-nav]').forEach(a => {
      const k = a.getAttribute('data-nav');
      const active =
        (k==='dashboard' && file==='index.html') ||
        (k==='history'   && file==='history.html') ||
        (k==='settings'  && file==='settings.html');
      if (active) a.classList.add('border','border-cyan-400/40','text-cyan-300');
    });
    if (window.lucide) window.lucide.createIcons();
  })();
</script>

    <!-- ================= MAIN ================= -->
    <main class="max-w-7xl mx-auto px-4 md:px-6 py-6 space-y-6">
      <!-- General settings -->
      <section class="card glassy-card card-border" data-aos="fade-up">
        <div class="card-body">
          <div class="flex items-center justify-between">
            <h2 class="card-title">Umum</h2>
            <div class="text-xs text-slate-400">Sesuaikan preferensi global</div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <div class="form-control">
              <label class="label"><span class="label-text">Tema</span></label>
              <div class="join">
                <input type="radio" name="theme" id="themeDark"   class="btn join-item" aria-label="Gelap" checked>
                <input type="radio" name="theme" id="themeLight"  class="btn join-item" aria-label="Terang">
                <input type="radio" name="theme" id="themeSystem" class="btn join-item" aria-label="Sistem">
              </div>
            </div>
            <div class="form-control">
              <label class="label"><span class="label-text">Bahasa (TTS & UI)</span></label>
              <select id="langSelect" class="select select-bordered">
                <option value="id-ID" selected>Indonesia (id-ID)</option>
                <option value="en-US">English (en-US)</option>
              </select>
            </div>
            <div class="form-control">
              <label class="label"><span class="label-text">Notifikasi</span></label>
              <label class="flex items-center gap-2 bg-white/5 border border-white/10 rounded-full px-3 py-2">
                <input type="checkbox" id="notifToggle" class="toggle" checked />
                <span>Aktifkan toast</span>
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Alerts (durasi duduk) -->
      <section class="card glassy-card card-border" data-aos="fade-up">
        <div class="card-body">
          <div class="flex items-center justify-between">
            <h2 class="card-title">Peringatan Durasi Duduk</h2>
            <div class="text-xs text-slate-400">Atur ambang & audio</div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-4">
            <label class="form-control">
              <span class="label-text mb-1">Ambang Lembut (menit)</span>
              <input type="number" id="softThresholdInput" class="input input-bordered" min="5" max="180" step="5" value="30" />
            </label>
            <label class="form-control">
              <span class="label-text mb-1">Ambang Kuat (menit)</span>
              <input type="number" id="hardThresholdInput" class="input input-bordered" min="10" max="240" step="5" value="60" />
            </label>
            <label class="form-control">
              <span class="label-text mb-1">Ulangi Lembut (menit)</span>
              <input type="number" id="repeatSoftInput" class="input input-bordered" min="5" max="120" step="5" value="15" />
            </label>
            <label class="form-control">
              <span class="label-text mb-1">Ulangi Kuat (menit)</span>
              <input type="number" id="repeatHardInput" class="input input-bordered" min="10" max="240" step="5" value="30" />
            </label>
          </div>

          <div class="mt-4 flex flex-wrap items-center gap-4">
            <label class="flex items-center gap-2 bg-white/5 border border-white/10 rounded-full px-3 py-2">
              <input type="checkbox" id="muteAlertsToggle" class="toggle" />
              <span>Bisukan suara peringatan</span>
            </label>
            <button id="testSoftBtn" class="btn btn-outline btn-sm">Tes Suara (Soft)</button>
            <button id="testHardBtn" class="btn btn-outline btn-sm">Tes Suara (Hard)</button>
          </div>
        </div>
      </section>

      <!-- TTS (Google atau Web Speech) -->
      <section class="card glassy-card card-border" data-aos="fade-up">
        <div class="card-body">
          <div class="flex items-center justify-between">
            <h2 class="card-title">Suara Asisten (TTS)</h2>
            <div class="text-xs text-slate-400">Google Cloud TTS via proxy, atau fallback Web Speech</div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-4">
            <label class="form-control">
              <span class="label-text mb-1">Suara</span>
              <select id="voiceSelect" class="select select-bordered">
                <option value="id-ID-Standard-A" selected>id-ID-Standard-A</option>
                <option value="id-ID-Standard-B">id-ID-Standard-B</option>
                <option value="id-ID-Wavenet-A">id-ID-Wavenet-A</option>
                <option value="id-ID-Wavenet-D">id-ID-Wavenet-D</option>
              </select>
            </label>
            <label class="form-control">
              <span class="label-text mb-1">Kecepatan</span>
              <input type="range" id="ttsRate" class="range" min="0.5" max="2" step="0.05" value="1" />
            </label>
            <label class="form-control">
              <span class="label-text mb-1">Pitch</span>
              <input type="range" id="ttsPitch" class="range" min="-10" max="10" step="1" value="0" />
            </label>
            <div class="form-control">
              <span class="label-text mb-1">Proxy TTS (opsi)</span>
              <input type="url" id="ttsProxyInput" class="input input-bordered" placeholder="https://server-kamu/tts" />
            </div>
          </div>

          <div class="mt-4 flex items-center gap-2">
            <input type="text" id="ttsTestText" class="input input-bordered w-full" placeholder="Teks untuk dites" value="Halo! Ini adalah suara asisten SitSense." />
            <button id="ttsTestBtn" class="btn btn-primary">Tes Bicara</button>
            <button id="ttsStopBtn" class="btn btn-outline">Stop</button>
          </div>
        </div>
      </section>

      <!-- AI Gemini -->
      <section class="card glassy-card card-border" data-aos="fade-up">
        <div class="card-body">
          <div class="flex items-center justify-between">
            <h2 class="card-title">AI Rekomendasi (Gemini)</h2>
            <div class="text-xs text-slate-400">Gunakan Proxy agar API key aman</div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <label class="form-control">
              <span class="label-text mb-1">Proxy Gemini</span>
              <input type="url" id="geminiProxyInput" class="input input-bordered" placeholder="https://server-kamu/gemini" />
            </label>
            <label class="form-control">
              <span class="label-text mb-1">API Key (opsional)</span>
              <input type="password" id="geminiApiKeyInput" class="input input-bordered" placeholder="•••••••" />
            </label>
            <label class="form-control">
              <span class="label-text mb-1">Model</span>
              <select id="geminiModelSelect" class="select select-bordered">
                <option value="gemini-1.5-flash" selected>gemini-1.5-flash</option>
                <option value="gemini-1.5-pro">gemini-1.5-pro</option>
              </select>
            </label>
          </div>

          <div class="mt-4 flex items-center gap-2">
            <button id="geminiTestBtn" class="btn btn-outline">Tes Koneksi</button>
            <span id="geminiTestStatus" class="text-sm text-slate-400">Belum dites</span>
          </div>
        </div>
      </section>

      <!-- Import/Export -->
      <section class="card glassy-card card-border" data-aos="fade-up">
        <div class="card-body">
          <div class="flex items-center justify-between">
            <h2 class="card-title">Impor / Ekspor</h2>
            <div class="text-xs text-slate-400">Cadangkan atau pindahkan pengaturan</div>
          </div>

          <div class="mt-4 flex flex-wrap items-center gap-2">
            <button id="exportSettingsBtn" class="btn btn-outline">Export JSON</button>
            <label for="importFile" class="btn btn-outline">Import JSON</label>
            <input id="importFile" type="file" accept="application/json" class="hidden" />
            <button id="resetSettingsBtn" class="btn btn-outline btn-error">Reset Default</button>
            <button id="saveSettingsBtn" class="btn btn-primary">Simpan</button>
          </div>
        </div>
      </section>
    </main>

    <!-- ================= FOOTER ================= -->
    <footer class="border-t border-white/10 py-6">
      <div class="max-w-7xl mx-auto px-4 md:px-6 text-sm text-slate-400 flex items-center justify-between">
        <p>© <span class="text-slate-200 font-medium">SitSense</span> — Project IoT</p>
        <p>Pengaturan</p>
      </div>
    </footer>

    <!-- ================= Scripts ================= -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        if (window.AOS) AOS.init();
        if (window.lucide) window.lucide.createIcons();
      });
    </script>

    <script src="./assets/js/ui.js"></script>
    <script src="./assets/js/settings.js"></script>
  </body>
</html>